{% extends "base.html" %}
{% block title %}Events Calendar{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2 class="text-center">Events Calendar</h2>
    <div id="calendar"></div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        var calendarEl = document.getElementById("calendar");

        fetch("/events/data/")  // Fetch event data
            .then(response => response.json())
            .then(events => {
                var formattedEvents = events.map(event => ({
                    title: event.title,
                    start: event.date  // Ensure event.date is in YYYY-MM-DD format
                }));

                var calendar = new FullCalendar.Calendar(calendarEl, {
                    initialView: "dayGridMonth",  // Month view
                    events: formattedEvents,  // Load events from backend
                    eventClick: function(info) {
                        alert("Event: " + info.event.title);
                    }
                });

                calendar.render();  // Render the calendar
            })
            .catch(error => console.error("Error fetching events: ", error));
    });
</script>
{% endblock %}
